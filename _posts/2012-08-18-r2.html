--- 
layout: post
name: r2
title: "\xE7\xAC\xA8\xE5\x8A\x9E\xE6\xB3\x95\xE5\xAD\xA6R\xE7\xBC\x96\xE7\xA8\x8B\xEF\xBC\x882\xEF\xBC\x89"
date: 2012-08-18 12:51:00 +08:00
categories: 
- "\xE7\xBC\x96\xE7\xA8\x8B"
- "\xE5\x85\xA5\xE9\x97\xA8\xE6\x95\x99\xE7\xA8\x8B"
permalink: /2012/08/r2.html
---
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-WkT3ZrrECTQ/UC8f4tpT1gI/AAAAAAAABHc/occid3Ec4a8/s1600/20104221762924.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="279" src="http://1.bp.blogspot.com/-WkT3ZrrECTQ/UC8f4tpT1gI/AAAAAAAABHc/occid3Ec4a8/s320/20104221762924.jpg" width="320" /></a></div><br />本例将介绍R语言中的while循环和if条件。最终用它来解决Project Euler的<a href="http://projecteuler.net/problem=2">第二个问题</a>。除了练习之外你还需要了解一些<a href="http://en.wikipedia.org/wiki/Fibonacci_number">斐波纳契数列</a>的知识。废话不多说了，打开R控制台，跟着输入下面的代码，自行琢磨吧。<br /><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #666666; font-style: italic;"># 预备练习，while循环和if判断</span><br />x &lt;- <span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">10</span><br /><a href="http://inside-r.org/r-doc/base/print"><span style="color: #003399; font-weight: bold;">print</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/print"><span style="color: #003399; font-weight: bold;">print</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">[</span><span style="color: #cc66cc;">10</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/print"><span style="color: #003399; font-weight: bold;">print</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">[</span>-<span style="color: #cc66cc;">10</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br />&nbsp;<br />i &lt;- <span style="color: #cc66cc;">1</span><br /><span style="color: black; font-weight: bold;">while</span> <span style="color: #009900;">(</span>i &lt;= <span style="color: #cc66cc;">10</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />  <a href="http://inside-r.org/r-doc/base/print"><span style="color: #003399; font-weight: bold;">print</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">[</span>i<span style="color: #009900;">]</span><span style="color: #009900;">)</span><br />  i &lt;- i + <span style="color: #cc66cc;">1</span><br /><span style="color: #009900;">}<a name='more'></a></span><br />i &lt;- <span style="color: #cc66cc;">1</span><br /><span style="color: black; font-weight: bold;">while</span> <span style="color: #009900;">(</span><span style="color: black; font-weight: bold;">TRUE</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />  <a href="http://inside-r.org/r-doc/base/print"><span style="color: #003399; font-weight: bold;">print</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">[</span>i<span style="color: #009900;">]</span><span style="color: #009900;">)</span><br />  i &lt;- i + <span style="color: #cc66cc;">1</span><br />  <span style="color: black; font-weight: bold;">if</span> <span style="color: #009900;">(</span>i &gt; <span style="color: #cc66cc;">10</span><span style="color: #009900;">)</span> <span style="color: black; font-weight: bold;">break</span><br /><span style="color: #009900;">}</span><br /><span style="color: #666666; font-style: italic;"># 用循环和条件来完成前篇文章中的问题</span><br /><span style="color: #666666; font-style: italic;"># 可以体会到R语言向量化计算的特点。</span><br />x &lt;- <span style="color: #cc66cc;">1</span><br />sumx &lt;- <span style="color: #cc66cc;">0</span><br /><span style="color: black; font-weight: bold;">while</span> <span style="color: #009900;">(</span>x &lt; <span style="color: #cc66cc;">1000</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />  <span style="color: black; font-weight: bold;">if</span> <span style="color: #009900;">(</span>x %% <span style="color: #cc66cc;">3</span> == <span style="color: #cc66cc;">0</span> | x %% <span style="color: #cc66cc;">5</span> == <span style="color: #cc66cc;">0</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />    sumx &lt;- sumx + x<br />    <span style="color: #009900;">}</span><br />  x &lt;- x + <span style="color: #cc66cc;">1</span><br /><span style="color: #009900;">}</span><br /><a href="http://inside-r.org/r-doc/base/print"><span style="color: #003399; font-weight: bold;">print</span></a><span style="color: #009900;">(</span>sumx<span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: #666666; font-style: italic;"># Project Euler 2</span><br /><span style="color: #666666; font-style: italic;"># 找到4000000以下的斐波纳契数列</span><br /><span style="color: #666666; font-style: italic;"># 将其中的偶数进行求和</span><br />i &lt;- <span style="color: #cc66cc;">2</span><br />x &lt;- <span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">2</span><br /><span style="color: black; font-weight: bold;">while</span> <span style="color: #009900;">(</span>x<span style="color: #009900;">[</span>i<span style="color: #009900;">]</span> &lt; 4e6<span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />  x<span style="color: #009900;">[</span>i+<span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span> &lt;- x<span style="color: #009900;">[</span>i-<span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span> + x<span style="color: #009900;">[</span>i<span style="color: #009900;">]</span><br />  i &lt;- i + <span style="color: #cc66cc;">1</span><br /><span style="color: #009900;">}</span><br />x &lt;- x<span style="color: #009900;">[</span>-i<span style="color: #009900;">]</span><br /><a href="http://inside-r.org/r-doc/base/sum"><span style="color: #003399; font-weight: bold;">sum</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">[</span>x %% <span style="color: #cc66cc;">2</span> == <span style="color: #cc66cc;">0</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span></pre></div></div><br />得到的结果为4613732。使用while和if语句时要注意，其判断条件都要放在圆括号中，之后的代码段如果超过一行则要用大括号注明。
