--- 
layout: post
name: rr
title: "R\xE8\xAF\xAD\xE8\xA8\x80\xE5\x9F\xBA\xE7\xA1\x80\xE5\x85\xA5\xE9\x97\xA8\xE4\xB9\x8B\xE4\xB8\x89\xEF\xBC\x9A\xE5\xB8\xB8\xE7\x94\xA8\xE7\xBB\x9F\xE8\xAE\xA1\xE5\x87\xBD\xE6\x95\xB0\xE8\xBF\x90\xE7\xAE\x97"
date: 2011-11-07 20:10:00 +08:00
categories: 
- "\xE5\x85\xA5\xE9\x97\xA8\xE6\x95\x99\xE7\xA8\x8B"
permalink: /2011/11/rr.html
---
在R语言中经常会用到函数，例如<a href="http://xccds1977.blogspot.com/2011/10/r_30.html">上节</a>中讲到的求样本统计量就需要均值函数(mean)和标准差函数(sd)。对于二元数值数据还用到协方差(cov)，对于二元分类数据则可以用交叉联列表函数(table)。下文讲述在初级统计学中最常用到的三类函数。<br /><br /><b><span class="Apple-style-span" style="font-size: large;">一、数据汇总函数</span></b><br />我们还是以R中自带的iris数据为例，输入head(iris)你可以获得数据的前6个样本及对应的5个变量。取出最后两列数据作为讲解的对象：Species表示花的种类，Petal.Width表示花瓣宽度<br /><blockquote class="tr_bq">data=iris[,c(4,5)]</blockquote>下一步我们想计算不同种类花瓣的平均宽度，可以使用tapply函数，在计算前先用attach命令将data这个数据框解包以方便直接操作其变量，而不需再用$符号。<br /><a name='more'></a><br /><blockquote class="tr_bq">attach(data)<br />tapply(X=Petal.Width,INDEX=Species,FUN=mean)</blockquote>结果如下<br /><blockquote class="tr_bq">setosa versicolor &nbsp;virginica<br />0.246 &nbsp; &nbsp; &nbsp;1.326 &nbsp; &nbsp; &nbsp;2.026&nbsp;</blockquote>和tapply类似的还有sapply函数，在进一步讲解前初学者还需搞清楚两种数据表现方式，即stack（堆叠数据）和unstack（非堆叠数据），上面的data就是一个堆叠数据，每一行表示一个样本。而非堆叠数据可以根据unstack函数转换而来<br /><blockquote class="tr_bq">data.unstack=unstack(data)<br />head(data.unstack)</blockquote>你应该明白这二者之间的区别了，如果要对非堆叠数据计算不同种类花瓣的平均宽度，可以利用如下函数。<br /><blockquote class="tr_bq">sapply(data.unstack,FUN=mean)</blockquote>结果是一样的，也就是说tapply对应于stack数据，而sapply对应于unstack数据<br /><br /><b><span class="Apple-style-span" style="font-size: large;">二、概率计算函数</span></b><br />如果给定一种概率分布，通常会有四类计算问题：<br /><ul><li>计算其概率密度density （d）</li><li>计算其概率分布probability（p）</li><li>计算其百分位数quantile （q）</li><li>随机数模拟random （r）</li></ul>记住上面四类计算对应的英文首字母，再对照下表就很容易计算各种概率问题了。<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-h1-vKZMKEh4/TrfKPr_3QOI/AAAAAAAAAhQ/2Gs77XvCBxI/s1600/%25E6%258D%2595%25E8%258E%25B7.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="332" src="http://1.bp.blogspot.com/-h1-vKZMKEh4/TrfKPr_3QOI/AAAAAAAAAhQ/2Gs77XvCBxI/s400/%25E6%258D%2595%25E8%258E%25B7.JPG" width="400" /></a></div><br />举例来讲，我们求标准正态分布曲线下小于1的面积p(x&lt;1)，正态分布是norm，而分布函数是p，那么使用pnorm(1)就得出了结果0.84；若计算扔10次硬币实验中有3次正面向上的概率，类似的dbinom(x=3,size=10,prob=0.5)得出0.11<br /><br /><b><span class="Apple-style-span" style="font-size: large;">三、抽样函数</span></b><br />我们想从1到10中随机抽取5个数字，那么这样来做：首先产生一个序列，然后用sample函数进行无放回抽取。<br /><blockquote class="tr_bq">x=1:10<br />sample(x,size=5)</blockquote>有放回抽取则是<br /><blockquote class="tr_bq">sample(x,size=5,replace=T)</blockquote>sample函数在建模中经常用来对样本数据进行随机的划分，一部分作为训练数据，另一部分作为检验数据。
