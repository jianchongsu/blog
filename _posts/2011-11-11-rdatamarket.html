--- 
layout: post
name: rdatamarket
title: "\xE5\x9C\xA8R\xE4\xB8\xAD\xE4\xBD\xBF\xE7\x94\xA8DataMarket\xE7\x9A\x84\xE5\x85\xAC\xE5\xBC\x80\xE6\x95\xB0\xE6\x8D\xAE\xE6\xBA\x90"
date: 2011-11-11 10:17:00 +08:00
categories: 
- "\xE5\x85\xAC\xE5\xBC\x80\xE6\x95\xB0\xE6\x8D\xAE"
permalink: /2011/11/rdatamarket.html
---
在如今的商业世界中，各种数据和统计数字是非常重要的决策依据，但良好的数据通常很难获得。因为数据来源分散而且格式不一，世界各地的分析人员往往花费了无数的时间进行数据检索、复制、粘贴和清理。<br /><br /><a href="http://datamarket.com/">DataMarket.com</a>是2010年推出的一个数据门户网站，可以一站式访问各种公共和私营部门组织的统计数据和结构化数据。这使得用户非常方便的查找、比较、可视化和下载各类机构的公开数据，如联合国，世界银行，欧盟统计局。时间序列数据还可以与新闻事件相关联，并可以用任何选定的数据格式使用到任何地方。<br /><br />我们在之前的<a href="http://xccds1977.blogspot.com/2011/10/blog-post.html">博文</a>中曾提到过DataMarket的数据源，本文简单介绍一下如何更方便的在R语言中调用DataMarket数据。<br /><a name='more'></a><br /><br />首先安装<b>rdatamarket</b>扩展包并加载<br /><blockquote class="tr_bq">install.packages('rdatamarket')<br />library(rdatamarket)</blockquote>然后在Datamarket网站中搜索你需要的数据，例如中国的CPI数据，将网址复制下来，再使用<b>dmlist</b>命令将其转化为dataframe格式，以方便进一步处理。<br /><blockquote class="tr_bq">data=dmlist('http://datamarket.com/data/set/148w/inflation-consumer-prices-annual#display=line&amp;ds=148w|ga2=v.39.4f')<br />head(data)</blockquote>其结果如下所示：<br /><blockquote class="tr_bq">Country Year &nbsp; &nbsp; Value<br />1 &nbsp; China 1987 &nbsp;7.219986<br />2 &nbsp; China 1988 18.736427<br />3 &nbsp; China 1989 18.333044<br />4 &nbsp; China 1990 &nbsp;3.058311<br />5 &nbsp; China 1991 &nbsp;3.543575<br />6 &nbsp; China 1992 &nbsp;6.340345</blockquote>数据中默认包含了香港和澳门地区，如果你想单独研究大陆地方也很容易<br /><blockquote class="tr_bq">newdata=split(x=data,f=data$Country)</blockquote>另一种命令<b>dmseries</b>则将原始数据转化为时间序列格式zoo，其使用方法也是类似的<br /><blockquote class="tr_bq">timedata=dmseries('http://datamarket.com/data/set/148w/inflation-consumer-prices-annual#display=line&amp;ds=148w|ga2=v.39.4f')</blockquote>如果希望获取元数据信息则使用<b>dminfo</b>命令<br /><blockquote class="tr_bq">info=dminfo('http://datamarket.com/data/set/148w/inflation-consumer-prices-annual#display=line&amp;ds=148w|ga2=v.39.4f')<br />print(info)</blockquote>从下面的结果可以看到此数据是由世界银行提供，引用的IMF数据<br />Title: "Inflation, consumer prices (annual %)"<br />Provider: "World Bank" (citing "International Monetary Fund, International Financial Statistics and data files.")<br />Dimensions:<br />&nbsp; "Country" (180 values):<br />&nbsp; &nbsp; "Afghanistan"<br />&nbsp; &nbsp; "Albania"<br />&nbsp; &nbsp; "Algeria"<br />&nbsp; &nbsp; "Angola"<br />&nbsp; &nbsp; "Antigua and Barbuda"<br />&nbsp; &nbsp; [...]
