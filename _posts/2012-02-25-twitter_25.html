--- 
layout: post
name: twitter_25
title: "\xE5\x9C\xA8Twitter\xE4\xB8\x8A\xE4\xBD\xA0\xE5\xBA\x94\xE8\xAF\xA5\xE5\x85\xB3\xE6\xB3\xA8\xE8\xB0\x81\xEF\xBC\x9F"
date: 2012-02-25 13:13:00 +08:00
categories: 
- twitter
permalink: /2012/02/twitter_25.html
---
<div class="separator" style="clear: both; text-align: center;"><a href="http://thumbsnap.com/i/rj9Ilrwz.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="200" src="http://thumbsnap.com/i/rj9Ilrwz.jpg" width="200" /></a></div><b>社交媒体</b>中的<b>数据挖掘</b>是当今比较热门的领域之一。各平台公司都想从用户的数据中寻找其偏好特征，提供个性化的服务。其中一种服务就是在微博平台中向用户推荐值得关注的对象名单。如果用户已经使用了一段时间的服务并关注了一些对象，那么有一种简单思路可以为其提供更多的关注对象。<br /><br />俗语说：人以群分，物以类聚。朋友之间基本上是臭味相投的，再进一步延伸，<b>朋友的朋友也应该能成为新的朋友</b>。那么进行推荐服务的方法可以这样来实现：先找出用户已经关注朋友的名单，再进一步找出每个朋友所关注的对象，再根据频数作为推荐的权重。下面我们用Twitter为例用R语言来实现这种思路。<br /><a name='more'></a><br />先从笔者的推号入手（@xccds），提取了100名关注对象的信息。然后对每个关注对象再提取他的100名关注对象信息，合并后制成频数表，剔除笔者已经关注过的对象。排序后保留频数最高的前五名，绘制条形图以显示最后的推荐结果。查了一下这几位的资料，感觉还比较靠谱，值得follow。各位经常上推的朋友也不妨一试。<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://thumbsnap.com/i/TF9gvoew.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="266" src="http://thumbsnap.com/i/TF9gvoew.jpg" width="400" /></a></div><br />注：由于Twitter API有限制，所以并未完全获得所有一万条信息，上图是根据大约两千条信息绘制的。<br /><br /><b>R代码如下：</b><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R"><span style="font-family: 'Courier New', Courier, monospace;"><a href="http://inside-r.org/r-doc/base/rm"><span style="color: #003399;">rm</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/list"><span style="color: #003399;">list</span></a>=<a href="http://inside-r.org/r-doc/base/ls"><span style="color: #003399;">ls</span></a><span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/library"><span style="color: #003399;">library</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/twitteR">twitteR</a><span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;">#加载包</span><br />myid &lt;- getUser<span style="color: #009900;">(</span><span style="color: blue;">'xccds'</span><span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;">#获取用户信息</span><br /><span style="color: #666666; font-style: italic;">#取得100名关注对象的用户名</span><br />myfo &lt;- twListToDF<span style="color: #009900;">(</span>myid$getFriends<span style="color: #009900;">(</span>n=<span style="color: #cc66cc;">100</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span>$screenName  <br />ffo &lt;-<a href="http://inside-r.org/r-doc/base/list"><span style="color: #003399;">list</span></a><span style="color: #009900;">(</span><span style="color: #009900;">)</span><br />record &lt;- <a href="http://inside-r.org/r-doc/base/character"><span style="color: #003399;">character</span></a><span style="color: #009900;">(</span><span style="color: #009900;">)</span><br /><span style="color: black;">for</span> <span style="color: #009900;">(</span>i <span style="color: black;">in</span> <span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">100</span><span style="color: #009900;">)</span><span style="color: #009900;">{</span><br />  user &lt;- getUser<span style="color: #009900;">(</span><span style="color: #009900;">(</span>myfo<span style="color: #009900;">[</span>i<span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span>  <span style="color: #666666; font-style: italic;">#获取关注对象的信息</span><br />  <span style="color: #666666; font-style: italic;">#取得关注对象的关注对象</span><br />  ffo &lt;- twListToDF<span style="color: #009900;">(</span>user$getFriends<span style="color: #009900;">(</span>n=<span style="color: #cc66cc;">100</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span>$screenName<br />  record &lt;-  <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399;">c</span></a><span style="color: #009900;">(</span>record <span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/base/as.character"><span style="color: #003399;">as.character</span></a><span style="color: #009900;">(</span>ffo<span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /><span style="color: #009900;">}</span><br /><span style="color: #666666; font-style: italic;"># 生成频数表</span><br />table.record &lt;- <a href="http://inside-r.org/r-doc/base/table"><span style="color: #003399;">table</span></a><span style="color: #009900;">(</span>record<span style="color: #009900;">)</span><br /><span style="color: #666666; font-style: italic;"># 从表格转化为数据框</span><br /><a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399;">data</span></a> = <a href="http://inside-r.org/r-doc/base/as.data.frame"><span style="color: #003399;">as.data.frame</span></a><span style="color: #009900;">(</span>table.record<span style="color: #339933;">,</span>stringsAsFactors=F<span style="color: #009900;">)</span><br /><span style="color: #666666; font-style: italic;"># 将已经关注的对象从中删除</span><br /><a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399;">data</span></a> &lt;- <a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399;">data</span></a><span style="color: #009900;">[</span><a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399;">data</span></a>$record%in%<a href="http://inside-r.org/r-doc/base/setdiff"><span style="color: #003399;">setdiff</span></a><span style="color: #009900;">(</span>record<span style="color: #339933;">,</span>myfo<span style="color: #009900;">)</span><span style="color: #339933;">,</span><span style="color: #009900;">]</span><br /><span style="color: #666666; font-style: italic;"># 选择频数最高的五人</span><br /><a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399;">data</span></a> &lt;- <a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399;">data</span></a><span style="color: #009900;">[</span><a href="http://inside-r.org/r-doc/base/order"><span style="color: #003399;">order</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399;">data</span></a>$Freq<span style="color: #339933;">,</span>decreasing=T<span style="color: #009900;">)</span><span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">5</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span><span style="color: #009900;">]</span><br /><span style="color: #666666; font-style: italic;"># 加载包并绘制条形图</span><br /><a href="http://inside-r.org/r-doc/base/library"><span style="color: #003399;">library</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/ggplot2">ggplot2</a><span style="color: #009900;">)</span> <br />p &lt;- <a href="http://inside-r.org/packages/cran/ggplot">ggplot</a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399;">data</span></a><span style="color: #339933;">,</span>aes<span style="color: #009900;">(</span>record<span style="color: #339933;">,</span>Freq<span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />p + geom_bar<span style="color: #009900;">(</span>aes<span style="color: #009900;">(</span>fill=Freq<span style="color: #009900;">)</span><span style="color: #009900;">)</span>+coord_flip<span style="color: #009900;">(</span><span style="color: #009900;">)</span></span></pre></div></div>
