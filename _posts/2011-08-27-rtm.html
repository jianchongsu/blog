--- 
layout: post
name: rtm
title: "\xE5\x88\xA9\xE7\x94\xA8R\xE8\xAF\xAD\xE8\xA8\x80\xE7\x9A\x84tm\xE5\x8C\x85\xE8\xBF\x9B\xE8\xA1\x8C\xE6\x96\x87\xE6\x9C\xAC\xE6\x8C\x96\xE6\x8E\x98"
date: 2011-08-27 19:10:00 +08:00
categories: 
- "\xE8\x81\x9A\xE7\xB1\xBB\xE5\x88\x86\xE6\x9E\x90"
- "\xE6\x96\x87\xE6\x9C\xAC\xE6\x8C\x96\xE6\x8E\x98"
permalink: /2011/08/rtm.html
---
tm包是R语言中为文本挖掘提供综合性处理的package，进行操作前载入tm包，vignette命令可以让你得到相关的文档说明<br /><br />library(tm)<br />vignette("tm")<br /><br />首先要读取文本，本次操作所用的文本是tm包自带的20个XML格式文本，存放在library\tm\texxts\crude文件夹中。用Corpus命令读取文本并生成语料库文件<br /><a name='more'></a><br /><br />reut21578 &lt;- system.file("texts", "crude", package = "tm")<br />reuters &lt;- Corpus(DirSource(reut21578), readerControl = list(reader = readReut21578XML))<br /><br />下一步用tm_map命令对语料库文件进行预处理，将其转为纯文本并去除多余空格，转换小写，去除常用词汇、合并异形同意词汇<br /><br />reuters &lt;- tm_map(reuters, as.PlainTextDocument)<br />reuters &lt;- tm_map(reuters, stripWhitespace)<br />reuters &lt;- tm_map(reuters, tolower)<br />reuters &lt;- tm_map(reuters, removeWords, stopwords("english"))<br />tm_map(reuters, stemDocument)<br /><br />利用DocumentTermMatrix将处理后的语料库进行断字处理，生成词频权重矩阵<br /><br />dtm &lt;- DocumentTermMatrix(reuters)<br /><br />部分矩阵内容可通过inspect来观察<br /><br />inspect(dtm[1:5, 100:105])<br /><br />Docs &nbsp;abdul-aziz ability able abroad, abu accept<br />&nbsp; 127 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 0 &nbsp; 0 &nbsp; &nbsp; &nbsp;0<br />&nbsp; 144 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 0 &nbsp; 0 &nbsp; &nbsp; &nbsp;0<br />&nbsp; 191 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 0 &nbsp; 0 &nbsp; &nbsp; &nbsp;0<br />&nbsp; 194 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 0 &nbsp; 0 &nbsp; &nbsp; &nbsp;0<br />&nbsp; 211 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 0 &nbsp; 0 &nbsp; &nbsp; &nbsp;0<br /><br />如果需要考察多个文档中特有词汇的出现频率，可以手工生成字典，并将它作为生成矩阵的参数<br /><br />&nbsp;(d &lt;- Dictionary(c("prices", "crude", "oil")))<br />inspect(DocumentTermMatrix(reuters, list(dictionary = d)))<br /><br />因为生成的矩阵是一个稀疏矩阵，再进行降维处理，之后转为标准数据框格式<br /><br />dtm2 &lt;- removeSparseTerms(dtm, sparse=0.95)<br />data &lt;- as.data.frame(inspect(dtm2))<br /><br />再之后就可以利用R语言中任何工具加以研究了，下面用层次聚类试试看<br />先进行标准化处理，再生成距离矩阵，再用层次聚类<br /><br />data.scale &lt;- scale(data)<br />d &lt;- dist(data.scale, method = "euclidean")<br />fit &lt;- hclust(d, method="ward")<br /><br />绘制聚类图<br />plot(fit)<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-Xa3GPVxWf18/TljQa32ldGI/AAAAAAAAAZQ/ftQbV3WLkik/s1600/Rplot01.jpeg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="290" src="http://2.bp.blogspot.com/-Xa3GPVxWf18/TljQa32ldGI/AAAAAAAAAZQ/ftQbV3WLkik/s320/Rplot01.jpeg" width="320" /></a></div><br /><br />可以看到在20个文档中，489号和502号聚成一类，与其它文档区别较大。<br /><br /><br />
