--- 
layout: post
name: r6
title: "\xE7\xAC\xA8\xE5\x8A\x9E\xE6\xB3\x95\xE5\xAD\xA6R\xE7\xBC\x96\xE7\xA8\x8B\xEF\xBC\x886\xEF\xBC\x89"
date: 2012-09-02 11:37:00 +08:00
categories: 
- "\xE7\xBC\x96\xE7\xA8\x8B"
- "\xE5\x85\xA5\xE9\x97\xA8\xE6\x95\x99\xE7\xA8\x8B"
permalink: /2012/09/r6.html
---
有时候用R来解一些Project Euler的题目会非常简单，今天就来三题连解（6、7、8）。题目就不再这里复述了，可以查看<a href="http://projecteuler.net/problems">官方网站</a>。用到函数和表达式大部分在前面都已经熟悉过了，不过还是会接触到一些新的函数。废话不多说直接上代码吧。<br /><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #666666; font-style: italic;"># Euler 6 </span>&nbsp;<br />x &lt;- <span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">100</span><br /><a href="http://inside-r.org/r-doc/base/sum"><span style="color: #003399; font-weight: bold;">sum</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span>^<span style="color: #cc66cc;">2</span> - <a href="http://inside-r.org/r-doc/base/sum"><span style="color: #003399; font-weight: bold;">sum</span></a><span style="color: #009900;">(</span>x^<span style="color: #cc66cc;">2</span><span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: #666666; font-style: italic;"># Euler 7 </span><br />&nbsp;<br />n &lt;- <span style="color: #cc66cc;">0</span><br />i &lt;- <span style="color: #cc66cc;">1</span><br />m &lt;- <a href="http://inside-r.org/r-doc/base/rep"><span style="color: #003399; font-weight: bold;">rep</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">0</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">10001</span><span style="color: #009900;">)</span><br /><span style="color: black; font-weight: bold;">while</span> <span style="color: #009900;">(</span>n &lt;<span style="color: #cc66cc;">10001</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />    <span style="color: black; font-weight: bold;">if</span> <span style="color: #009900;">(</span>findprime<span style="color: #009900;">(</span>i<span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />        n &lt;- n +<span style="color: #cc66cc;">1</span> <br />        m<span style="color: #009900;">[</span>n<span style="color: #009900;">]</span> &lt;- i<span style="color: #009900;">}</span><br />    i &lt;- i + <span style="color: #cc66cc;">1</span><br /><span style="color: #009900;">}</span><br />m<span style="color: #009900;">[</span><span style="color: #cc66cc;">10001</span><span style="color: #009900;">]</span><br />&nbsp;<br /><span style="color: #666666; font-style: italic;"># 预备练习，熟悉一些字符串操作函数</span><br /><a href="http://inside-r.org/r-doc/graphics/text"><span style="color: #003399; font-weight: bold;">text</span></a> &lt;- <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: blue;">'hello'</span><span style="color: #339933;">,</span><span style="color: blue;">'world'</span><span style="color: #339933;">,</span><span style="color: blue;">'I'</span><span style="color: #339933;">,</span><span style="color: blue;">'love'</span><span style="color: #339933;">,</span><span style="color: blue;">'code'</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/gsub"><span style="color: #003399; font-weight: bold;">gsub</span></a><span style="color: #009900;">(</span><span style="color: blue;">'o'</span><span style="color: #339933;">,</span><span style="color: blue;">' '</span><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/graphics/text"><span style="color: #003399; font-weight: bold;">text</span></a><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/gsub"><span style="color: #003399; font-weight: bold;">gsub</span></a><span style="color: #009900;">(</span><span style="color: blue;">'o'</span><span style="color: #339933;">,</span><span style="color: blue;">'*'</span><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/graphics/text"><span style="color: #003399; font-weight: bold;">text</span></a><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/gsub"><span style="color: #003399; font-weight: bold;">gsub</span></a><span style="color: #009900;">(</span><span style="color: blue;">'o'</span><span style="color: #339933;">,</span><span style="color: blue;">''</span><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/graphics/text"><span style="color: #003399; font-weight: bold;">text</span></a><span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: #009900;">(</span>temp1 &lt;-<a href="http://inside-r.org/r-doc/base/paste"><span style="color: #003399; font-weight: bold;">paste</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/graphics/text"><span style="color: #003399; font-weight: bold;">text</span></a><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/nlme/collapse"><span style="color: #003399; font-weight: bold;">collapse</span></a>=<span style="color: blue;">' '</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/paste"><span style="color: #003399; font-weight: bold;">paste</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/graphics/text"><span style="color: #003399; font-weight: bold;">text</span></a><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/nlme/collapse"><span style="color: #003399; font-weight: bold;">collapse</span></a>=<span style="color: blue;">'*'</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/paste"><span style="color: #003399; font-weight: bold;">paste</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/graphics/text"><span style="color: #003399; font-weight: bold;">text</span></a><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/nlme/collapse"><span style="color: #003399; font-weight: bold;">collapse</span></a>=<span style="color: blue;">''</span><span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: #009900;">(</span>temp2 &lt;- <a href="http://inside-r.org/r-doc/base/strsplit"><span style="color: #003399; font-weight: bold;">strsplit</span></a><span style="color: #009900;">(</span>temp1<span style="color: #339933;">,</span><span style="color: blue;">" "</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/class"><span style="color: #003399; font-weight: bold;">class</span></a><span style="color: #009900;">(</span>temp2<span style="color: #009900;">)</span><br /><span style="color: #009900;">(</span>temp3 &lt;- <a href="http://inside-r.org/r-doc/base/unlist"><span style="color: #003399; font-weight: bold;">unlist</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/strsplit"><span style="color: #003399; font-weight: bold;">strsplit</span></a><span style="color: #009900;">(</span>temp1<span style="color: #339933;">,</span><span style="color: blue;">" "</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/class"><span style="color: #003399; font-weight: bold;">class</span></a><span style="color: #009900;">(</span>temp3<span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: #666666; font-style: italic;"># Euler 8 </span><br />&nbsp;<br />web &lt;- <span style="color: blue;">'http://projecteuler.net/problem=8'</span><br /><span style="color: #666666; font-style: italic;"># 用readLines函数来抓取网页</span><br /><a href="http://inside-r.org/r-doc/base/raw"><span style="color: #003399; font-weight: bold;">raw</span></a> &lt;- <a href="http://inside-r.org/r-doc/base/readLines"><span style="color: #003399; font-weight: bold;">readLines</span></a><span style="color: #009900;">(</span>web<span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/raw"><span style="color: #003399; font-weight: bold;">raw</span></a> &lt;- <a href="http://inside-r.org/r-doc/base/raw"><span style="color: #003399; font-weight: bold;">raw</span></a><span style="color: #009900;">[</span><span style="color: #cc66cc;">54</span>:<span style="color: #cc66cc;">73</span><span style="color: #009900;">]</span><br /><span style="color: #666666; font-style: italic;"># 删除多余字符串</span><br /><a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399; font-weight: bold;">data</span></a> &lt;- <a href="http://inside-r.org/r-doc/base/gsub"><span style="color: #003399; font-weight: bold;">gsub</span></a><span style="color: #009900;">(</span><span style="color: blue;">'&lt;br /&gt;'</span><span style="color: #339933;">,</span><span style="color: blue;">''</span><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/base/raw"><span style="color: #003399; font-weight: bold;">raw</span></a><span style="color: #009900;">)</span><br /><span style="color: #666666; font-style: italic;"># 粘合成一个字符串</span><br />num &lt;- <a href="http://inside-r.org/r-doc/base/paste"><span style="color: #003399; font-weight: bold;">paste</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399; font-weight: bold;">data</span></a><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/nlme/collapse"><span style="color: #003399; font-weight: bold;">collapse</span></a>=<span style="color: blue;">''</span><span style="color: #009900;">)</span><br /><span style="color: #666666; font-style: italic;"># 分割后转为数值向量</span><br />temp &lt;- <a href="http://inside-r.org/r-doc/base/as.numeric"><span style="color: #003399; font-weight: bold;">as.numeric</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/unlist"><span style="color: #003399; font-weight: bold;">unlist</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/strsplit"><span style="color: #003399; font-weight: bold;">strsplit</span></a><span style="color: #009900;">(</span>num<span style="color: #339933;">,</span><span style="color: blue;">''</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />&nbsp;<br />p &lt;- <a href="http://inside-r.org/r-doc/base/numeric"><span style="color: #003399; font-weight: bold;">numeric</span></a><span style="color: #009900;">(</span><span style="color: #009900;">)</span><br /><span style="color: black; font-weight: bold;">for</span> <span style="color: #009900;">(</span> i <span style="color: black; font-weight: bold;">in</span> <span style="color: #cc66cc;">1</span>:<span style="color: #009900;">(</span><span style="color: #cc66cc;">1000</span>-<span style="color: #cc66cc;">4</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />    p<span style="color: #009900;">[</span>i<span style="color: #009900;">]</span> &lt;- <a href="http://inside-r.org/r-doc/base/prod"><span style="color: #003399; font-weight: bold;">prod</span></a><span style="color: #009900;">(</span>temp<span style="color: #009900;">[</span>i:<span style="color: #009900;">(</span>i+<span style="color: #cc66cc;">4</span><span style="color: #009900;">)</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br /><span style="color: #009900;">}</span><br /><a href="http://inside-r.org/r-doc/base/max"><span style="color: #003399; font-weight: bold;">max</span></a><span style="color: #009900;">(</span>p<span style="color: #009900;">)</span></pre></div></div><br />第六题用R的向量化计算非常简单，第七题需要用到第二题中建立的findprime函数。第八题的解决是用字符串方法，先将那一长串数字作为字符串切开，再转为数值型向量，最后用循环求乘积。为了偷懒，是直接抓取的网页，没有输入那个长长的数字。
